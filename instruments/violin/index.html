<!DOCTYPE html>
<html lang="">
  <head>
    <meta charset="utf-8">
    <title>Yapsmi-violin</title>
    <link rel="stylesheet" href="./css/violin.css" />
    <link rel="icon" type="image/x-icon" href="./css/images/favicon.ico">
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>
    <script src="../../js/external/jquery.js"></script>
    <script src="../../js/knobs.js?version=1.1"></script>
    <script src="../../js/external/jquery-ui.js"></script>
    <script src="../../js/plugins.js?version=1.1"></script>




    <!-- <script src=https://code.jquery.com/jquery-3.1.1.min.js></script> -->
    <!-- <script src=../../js/jquery-3.1.1.min.js></script> -->

  </head>
  <body>
    <header>
      <div id="tools">
      </div> 

      <div id="model" class = "popup" style="display:none"><div class="close_button" onclick="$(this).parent().hide()">x</div>
        <div id="model_content"></div>
      </div>  

      <div id="string_maker_content" style="display:none"></div>
    </header>
    <main>

      <div  id="wrapper">
      
        <div class = "plugin" id="violin">

          <div id="strad"></div>

          <div id="bowing_area">
            <div id="bow" class="ui-widget-content"> <div class="bow_handle"></div></div>
          </div>          

          <div id="violin_playing">
          
            <div id="fretboardContainer">
              
              <div class="stringName" onclick="toggle_string_callback(event, 4)" style="top:32px"> E</div> 
              <div class="stringName" onclick="toggle_string_callback(event, 3)" style="top:50px"> A </div>  
              <div class="stringName" onclick="toggle_string_callback(event, 2)" style="top:67px"> D </div> 
              <div class="stringName" onclick="toggle_string_callback(event, 1)" style="top:85px"> G </div> 

              <div id="fretboard">
              
                <div id="finger4" class="leftHandFinger" style="top:33.71%; left:-100px"> </div> 
                <div id="finger3" class="leftHandFinger" style="top:47.5%; left:-100px"> </div>  
                <div id="finger2" class="leftHandFinger" style="top:62.28%; left:-100px"> </div> 
                <div id="finger1" class="leftHandFinger" style="top:79.57%; left:-100px"> </div> 
              </div>
            </div>

           
            <!-- <div id="struming" onclick="strum(event)"></div> -->

          </div>
    
          <div id="string_controls" class="instrument_controls">
          
            <div class="previous_controls" onclick="change_controls(-1, 'string_controls')"></div>
        
            <div class="next_controls" onclick="change_controls(+1, 'string_controls')"></div>
    
            <div class ="instrument_controls_window">
              <legend>G string</legend>

                <label id="all_strings_at_once">All strings
                  <input type="checkbox" onclick="all_strings(this)">
                </label>
      
                <div class="control_knob">
                    <div class="value_container">\(\mu^\vphantom{0}=\)<div class="knob_value" id="density€1_value">100</div></div>
                    <div class="knob" id="density€1"></div>
                </div>
                
                <div class="control_knob">
                  <div class="value_container">\(EI^\vphantom{0}=\)<div class="knob_value" id="stiffness€1_value">100</div></div>
                  <div class="knob" id="stiffness€1"></div>
                </div>
                  
                <div class="control_knob">
                    <div class="value_container">\(T^\vphantom{0}=\)<div class="knob_value" id="tension€1_value">100</div></div>
                    <div class="knob" id="tension€1"></div>
                </div>  
                
                <div class="control_knob">
                    <div class="value_container">\(\eta^\vphantom{0}=\)<div class="knob_value" id="losses_eta€1_value">100</div></div>
                    <div class="knob" id="losses_eta€1"></div>
                </div>

                <div class="control_knob">
                  <div class="value_container">\(R^\vphantom{0}=\)<div class="knob_value" id="losses_R€1_value">100</div></div>
                  <div class="knob" id="losses_R€1"></div>
              </div>
            </div>
            <div class ="instrument_controls_window" style="display:none">
              <legend>D string</legend>
      
                <div class="control_knob">
                    <div class="value_container">\(\mu^\vphantom{0}=\)<div class="knob_value" id="density€2_value">100</div></div>
                    <div class="knob" id="density€2"></div>
                </div>
                
                <div class="control_knob">
                  <div class="value_container">\(EI^\vphantom{0}=\)<div class="knob_value" id="stiffness€2_value">100</div></div>
                  <div class="knob" id="stiffness€2"></div>
                </div>
                  
                <div class="control_knob">
                    <div class="value_container">\(T^\vphantom{0}=\)<div class="knob_value" id="tension€2_value">100</div></div>
                    <div class="knob" id="tension€2"></div>
                </div>  
                
                <div class="control_knob">
                  <div class="value_container">\(\eta^\vphantom{0}=\)<div class="knob_value" id="losses_eta€2_value">100</div></div>
                  <div class="knob" id="losses_eta€2"></div>
              </div>

              <div class="control_knob">
                <div class="value_container">\(R^\vphantom{0}=\)<div class="knob_value" id="losses_R€2_value">100</div></div>
                <div class="knob" id="losses_R€2"></div>
            </div>
            </div>
            <div class ="instrument_controls_window" style="display:none">
              <legend>A string</legend>
      
                <div class="control_knob">
                    <div class="value_container">\(\mu^\vphantom{0}=\)<div class="knob_value" id="density€3_value">100</div></div>
                    <div class="knob" id="density€3"></div>
                </div>
                
                <div class="control_knob">
                  <div class="value_container">\(EI^\vphantom{0}=\)<div class="knob_value" id="stiffness€3_value">100</div></div>
                  <div class="knob" id="stiffness€3"></div>
                </div>
                  
                <div class="control_knob">
                    <div class="value_container">\(T^\vphantom{0}=\)<div class="knob_value" id="tension€3_value">100</div></div>
                    <div class="knob" id="tension€3"></div>
                </div>  
                
                <div class="control_knob">
                  <div class="value_container">\(\eta^\vphantom{0}=\)<div class="knob_value" id="losses_eta€3_value">100</div></div>
                  <div class="knob" id="losses_eta€3"></div>
                </div>

                <div class="control_knob">
                  <div class="value_container">\(R^\vphantom{0}=\)<div class="knob_value" id="losses_R€3_value">100</div></div>
                  <div class="knob" id="losses_R€3"></div>
              </div>
            </div>
            <div class ="instrument_controls_window" style="display:none">
              <legend>E string</legend>
      
                <div class="control_knob">
                    <div class="value_container">\(\mu^\vphantom{0}=\)<div class="knob_value" id="density€4_value">100</div></div>
                    <div class="knob" id="density€4"></div>
                </div>
                
                <div class="control_knob">
                  <div class="value_container">\(EI^\vphantom{0}=\)<div class="knob_value" id="stiffness€4_value">100</div></div>
                  <div class="knob" id="stiffness€4"></div>
                </div>
                  
                <div class="control_knob">
                    <div class="value_container">\(T^\vphantom{0}=\)<div class="knob_value" id="tension€4_value">100</div></div>
                    <div class="knob" id="tension€4"></div>
                </div>  
                
                <div class="control_knob">
                  <div class="value_container">\(\eta^\vphantom{0}=\)<div class="knob_value" id="losses_eta€4_value">100</div></div>
                  <div class="knob" id="losses_eta€4"></div>
                </div>

                <div class="control_knob">
                  <div class="value_container">\(R^\vphantom{0}=\)<div class="knob_value" id="losses_R€4_value">100</div></div>
                  <div class="knob" id="losses_R€4"></div>
                </div>
            </div>
        

          </div>

          <div id="righthand_controls" class="instrument_controls">

            <div class="previous_controls" onclick="change_controls(-1, 'righthand_controls')"></div>
        
            <div class="next_controls" onclick="change_controls(+1, 'righthand_controls')"></div>
            
            <div class ="instrument_controls_window" >
              <legend>Bow</legend>

              <div class="control_knob">
                <div class="value_container">\(v^\vphantom{0}\)=<div class="knob_value" id="bow_speed_value">100</div></div>
                <div class="knob" id="bow_speed"></div>
              </div>

              <div class="control_knob">
                <div class="value_container">\(w^\vphantom{0}\)=<div class="knob_value" id="width_value">100</div></div>
                <div class="knob" id="width"></div>
              </div>
              
              <div class="control_knob">
                <div class="value_container">\(x^\vphantom{0}\)=<div class="knob_value" id="position_value">100</div></div>
                <div class="knob" id="position"></div>
              </div>

              <div class="control_knob">
                <div class="value_container">\(F_0^\vphantom{0}\)=<div class="knob_value" id="strength_value">100</div></div>
                <div class="knob" id="strength"></div>
              </div>                 
            </div> 
            <div class ="instrument_controls_window"  style="display:none">
              <legend>Friction</legend>
             
                       
               <div class="control_knob">
                  <div class="value_container">\(v_t^\vphantom{0}\)=<div class="knob_value" id="vreg_value">100</div></div>
                  <div class="knob" id="vreg"></div>
                </div>   
                
                <div class="control_knob">
                  <div class="value_container">\(\mu_s^\vphantom{0}\)=<div class="knob_value" id="mus_value">100</div></div>
                  <div class="knob" id="mus"></div>
                </div>   

                <div class="control_knob">
                  <div class="value_container">\(\mu_d^\vphantom{0}\)=<div class="knob_value" id="mud_value">100</div></div>
                  <div class="knob" id="mud"></div>
                </div>   
            </div>
            <div class ="instrument_controls_window"  style="display:none">
              <legend>Model </legend> 

                <fieldset id="model_choice">

                  <legend>Choices</legend>
             
                  <select name="friction_model" id="friction_model-select" onchange="change_friction_model(this)">
                    <option value="static" selected>Static</option>
                    <option value="elasto-plastic">Elasto-plastic</option>
                  </select>    
                  <br>

                  <select name="friction_model-regularisation" id="friction_model-select" onchange="change_friction_model_regularisation(this)">
                    <!-- <option value="Coulomb">Coulomb</option> -->
                    <option value="Stribeck">Stribeck</option>
                    <option value="Galluzzo">Galluzzo</option>
                    <option value="Bilbao">Bilbao</option>
                    <option value="Vigue">Vigue</option>
                    <option value="Ablitzer" selected>Ablitzer</option>
                  </select>    
                </fieldset>

               <div class="control_knob">
                  <div class="value_container">\(dim^\vphantom{0}\)=<div class="knob_value" id="dimension_value">100</div></div>
                  <div class="knob" id="dimension"></div>
                </div>   
                
                <!-- <div class="control_knob">
                  <div class="value_container">\(s_1^\vphantom{0}\)=<div class="knob_value" id="friction_s1_value">100</div></div>
                  <div class="knob" id="friction_s1"></div>
                </div>   

                <div class="control_knob">
                  <div class="value_container">\(s_2^\vphantom{0}\)=<div class="knob_value" id="friction_s2_value">100</div></div>
                  <div class="knob" id="friction_s2"></div>
                </div>    -->
            </div>
            <div class ="instrument_controls_window"  style="display:none">
              <legend>Elasto-plastic model</legend> 
             
                       
               <div class="control_knob">
                  <div class="value_container">\(s_0^\vphantom{0}\)=<div class="knob_value" id="friction_s0_value">100</div></div>
                  <div class="knob" id="friction_s0"></div>
                </div>   
                
                <div class="control_knob">
                  <div class="value_container">\(s_1^\vphantom{0}\)=<div class="knob_value" id="friction_s1_value">100</div></div>
                  <div class="knob" id="friction_s1"></div>
                </div>   

                <div class="control_knob">
                  <div class="value_container">\(s_2^\vphantom{0}\)=<div class="knob_value" id="friction_s2_value">100</div></div>
                  <div class="knob" id="friction_s2"></div>
                </div>   
            </div>
          </div>

          <div class="control_knob" id="general_output_impedance">
            <div class="value_container">Z=<div class="knob_value" id="output_impedance_value">100</div></div>
            <div class="knob" id="output_impedance"></div>
          </div>

        </div>   

    </div>

  </main>


    <footer></footer>
  </body>

  <script>
    $(function(){
      $("#tools").load("../../templates/tools.html?version=1.1", init_menu); 
    });
  </script>
  <script src="../../js/tools.js?version=1.1"></script>
  <script> 
    $(function(){
      $("#model_content").load("model.html"); 
    });
  </script> 
  <script type="module" src="js/init.js?version=1.1"></script>
  <script src="./js/violin-ui.js?version=1.1"></script>


  <script> 
    

    document.addEventListener('DOMContentLoaded', async function() {
      load_inst_knobs("violin")
    }, false);

   </script> 

</html>
